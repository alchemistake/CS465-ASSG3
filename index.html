<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CS465 ASSG3</title>
    <link rel="stylesheet" href="reset.css">

    <script id="vertex-shader" type="x-shader/x-vertex">
    attribute  vec4 vPosition;
    attribute vec2 vTexPosition;
    attribute vec3 vNormal;

    uniform mat4 modelViewMatrix;
    uniform mat4 projectionMatrix;

    varying vec2 fTexPosition;
    varying vec4 fColor;

    // Ambient
    uniform vec4 ambient;

    // Diffuse
    uniform vec3 lightPosition;
    uniform vec4 diffuse;

    // Specular
    uniform vec4 specular;
    uniform vec3 cameraPosition;

    void main()
    {
        vec4 diffusePart = diffuse * dot(normalize(vNormal), normalize(lightPosition));
        vec4 specularPart = specular * dot(normalize(lightPosition + cameraPosition), vNormal);

        //float Ks = pow( max(dot(N, H), 0.0), shininess);
        //vec4 specular =

        fColor = specularPart + diffusePart + ambient;
        fColor.a = 1.0;

        gl_Position = projectionMatrix * modelViewMatrix * vPosition;
        fTexPosition = vTexPosition;
    }


    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
    precision mediump float;

    varying vec2 fTexPosition;
    uniform sampler2D sampler;

    varying vec4 fColor;

    void main(){
        gl_FragColor = texture2D(sampler, fTexPosition) * fColor;
    }
    </script>

    <script type="text/javascript" src="Common/webgl-utils.js"></script>
    <script type="text/javascript" src="Common/initShaders.js"></script>
    <script type="text/javascript" src="Common/MV.js"></script>
    <script type="text/javascript" src="view.js"></script>
    <script type="text/javascript" src="bezier.js"></script>

    <style>
        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
        }

        #controller {
            position: fixed;
            left: 0;
            top: 0;
        }

        #controls {
            background: white;
        }
    </style>
</head>
<body style="height: 100%;">
<canvas id="gl-canvas" width="512" height="512">
    Oops ... your browser doesn't support the HTML5 canvas element
</canvas>
</body>
<img src="Textures/bg.png" id="bg" hidden/>
<img src="Textures/fg.png" id="fg" hidden/>
<script src="controller.js"></script>
<div id="controller">
    <button onclick="showOptions();">Show/Hide Controls</button>
    <div id="controls" hidden>
        Number of Control Points<br>
        <input name="noControlPointsX" onchange="changeNoControlPoints();" id="noControlPointsX" type="number"
               value="4">
        <input name="noControlPointsY" onchange="changeNoControlPoints();" id="noControlPointsY" type="number"
               value="4">
        <br>
        Step Number<br>
        <input name="noStep" onchange="changeNoStep();" id="noStep" type="number" value="100">
        <br>
        <h2>Ambient Light</h2>
        Cube Amb. Coef.
        <input name="cubeAmb" oninput="updateAmbient();" id="cubeAmb" type="range" value="0.5" step="0.01" min="0"
               max="1">
        <br>Bezier Amb. Coef.
        <input name="surfaceAmb" oninput="updateAmbient();" id="surfaceAmb" type="range" value="0.5" step="0.01" min="0"
               max="1">
        <br>Amb. Intensity
        <input name="intensityAmb" oninput="updateAmbient();" id="intensityAmb" type="range" value="0.5" step="0.01"
               min="0" max="1">

        <br>
        <h2>Diffuse Light</h2>
        <br>
        Cube Diff. Coef.
        <input name="cubeDiffuse" oninput="updateDiffuse();" id="cubeDiffuse" type="range" value="0.5" step="0.01"
               min="0" max="1">
        <br>Bezier Diff. Coef.
        <input name="surfaceDiffuse" oninput="updateDiffuse();" id="surfaceDiffuse" type="range" value="0.5" step="0.01"
               min="0" max="1">
        <br>Diff. Intensity
        <input name="intensityDiffuse" oninput="updateDiffuse();" id="intensityDiffuse" type="range" value="0.5"
               step="0.01"
               min="0" max="1">
    </div>
</div>
</html>